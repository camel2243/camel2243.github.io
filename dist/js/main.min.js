jQuery(document).ready(function(n){function i(i,t){if(!f){f=!0;var o=a.eq(i),c=l.eq(i);e(n([o,c])),"mobile"==t?(c.scrollTop(0),n(".cd-image-block").addClass("content-block-is-visible"),d.addClass("is-visible").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){d.find(".cd-close").addClass("is-scaled-up"),f=!1})):(l.addClass("overflow-hidden"),c.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){c.siblings().scrollTop(0),l.removeClass("overflow-hidden"),f=!1})),n(".no-csstransitions").length>0&&(f=!1),s(i)}}function e(i){i.each(function(){var i=n(this);i.addClass("is-selected").removeClass("move-left").siblings().removeClass("is-selected").end().prevAll().addClass("move-left").end().nextAll().removeClass("move-left")})}function s(n){0==n?v.addClass("inactive"):v.removeClass("inactive"),n+1>=a.length?r.addClass("inactive"):r.removeClass("inactive")}function t(){return window.getComputedStyle(o.get(0),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"").split(", ")}var o=n(".cd-images-list"),a=o.children("li"),d=n(".cd-content-block"),l=d.children("ul").eq(0).children("li"),c=n(".block-navigation"),r=c.find(".cd-next"),v=c.find(".cd-prev"),f=!1;o.on("click","a",function(e){e.preventDefault();var s=t();"mobile"==s&&i(a.index(n(this).parent("li")),"mobile")}),d.on("click",".cd-close",function(){var i=n(this);f||(f=!0,i.removeClass("is-scaled-up").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){d.removeClass("is-visible").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){f=!1}),n(".cd-image-block").removeClass("content-block-is-visible"),i.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")}))}),c.on("click","button",function(){var e=n(this),s=a.index(o.children("li.is-selected"));if(!e.hasClass("inactive")){var t=e.hasClass("cd-next")?s+1:s-1;i(t)}}),n(document).on("keydown",function(n){var e=t();"39"!=n.which||r.hasClass("inactive")||"desktop"!=e?"37"!=n.which||v.hasClass("inactive")||"desktop"!=e||i(a.index(o.children("li.is-selected"))-1):i(a.index(o.children("li.is-selected"))+1)})});